datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id           Int           @id @default(autoincrement())
  nome         String
  email        String        @unique
  produtos     Produto[]
  regioes      Regiao[]
  funcionarios Funcionario[]
  vendas       Venda[]
  despesas     Despesa[]
}

model Produto {
  id         Int         @id @default(autoincrement())
  picture    String?
  nome       String
  descricao  String
  categoria  String
  preco      Float
  usuario    Usuario?    @relation(fields: [usuarioId], references: [id])
  usuarioId  Int?
  itensVenda ItemVenda[]
}

model Regiao {
  id        Int       @id @default(autoincrement())
  picture   String?
  nome      String
  descricao String
  endereco  String?
  cidade    String
  usuarios  Usuario[]
  vendas    Venda[]
}

model Funcionario {
  id                Int      @id @default(autoincrement())
  picture           String?
  nome              String
  email             String
  descricao         String?
  endereco          String
  localAtuacao      String
  genero            String
  cpf               String
  dataContratacao   DateTime
  telefone          String
  formacaoAcademica String
  linkedin          String?
  github            String?
  usuario           Usuario  @relation(fields: [usuarioId], references: [id])
  usuarioId         Int
  vendas            Venda[]
}

model Despesa {
  id        Int      @id @default(autoincrement())
  nome      String
  data      DateTime
  descricao String?
  tipo      String
  valor     Float
  usuario   Usuario? @relation(fields: [usuarioId], references: [id])
  usuarioId Int?
}

model Venda {
  id                 Int         @id @default(autoincrement())
  data               DateTime
  funcionario        Funcionario @relation(fields: [funcionarioId], references: [id])
  funcionarioId      Int
  itensVenda         ItemVenda[]
  valor              Float
  quantidadeProdutos Int
  comprador          String
  regiao             Regiao      @relation(fields: [regiaoId], references: [id])
  regiaoId           Int
  formaPagamento     String
  usuario            Usuario     @relation(fields: [usuarioId], references: [id])
  usuarioId          Int
}

model ItemVenda {
  id         Int     @id @default(autoincrement())
  produto    Produto @relation(fields: [produtoId], references: [id])
  produtoId  Int
  quantidade Int
  venda      Venda   @relation(fields: [vendaId], references: [id])
  vendaId    Int
}
