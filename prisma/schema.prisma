generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Funcionario {
  ID_funcionario  Int      @id @default(autoincrement())
  img_funcionario String
  email           String
  CPf             String
  Nome            String
  telefone        String
  idade           Int
  endereco        String
  form_acad       String
  vendas          Venda[]
  regioes         Regiao[]
}

model Regiao {
  ID_regiao      Int         @id @default(autoincrement())
  nome           String
  ID_funcionario Int
  usuario        Funcionario @relation(fields: [ID_funcionario], references: [ID_funcionario])
}

model ItensVenda {
  ID_itemVenda Int     @id
  quant_item   Int
  ID_venda     Int
  venda        Venda   @relation(fields: [ID_venda], references: [ID_venda])
  ID_produto   Int
  produto      Produto @relation(fields: [ID_produto], references: [ID_produto])

  @@index([ID_venda], name: "idx_itens_venda_venda_id")
}

model Produto {
  ID_produto  Int          @id
  img_produto String
  nome        String
  preco       Float
  categoria   String
  descricao   String
  vendas      Venda[]
  itensVenda  ItensVenda[]
}

model Venda {
  ID_venda          Int            @id
  Data              DateTime
  total             Float
  ID_funcionario    Int
  funcionario       Funcionario    @relation(fields: [ID_funcionario], references: [ID_funcionario])
  produtos          Produto[]
  ID_formaPagamento Int
  formaPagto        FormaPagamento @relation(fields: [ID_formaPagamento], references: [ID_formaPagamento])
  itensVenda        ItensVenda[]
}

model FormaPagamento {
  ID_formaPagamento Int     @id
  tipo              String
  vendas            Venda[]
}
